<?xml version="1.0" ?>
<diagram author="Glenn De Jonghe" name="Test Model">
    <description>
        Testing the object manager
    </description>
    <inports>
        <port name="test_input" />
    </inports>
    <outports>
        <port name="test_output" />
    </outports>
    <class name="Test1" default="true">
        <relationships>
            <association class-relation="Test2"/>
        </relationships>
        <scxml initial="start">
            <state id="start">
                <transition port="test_input" event="create" target="../wait">
                    <raise target="objectManager" event="createInstance">
                        <parameter value="'Test2'"/>
                        <parameter value="SELF" />
                    </raise>
                    <raise port="test_output" event="request_send"/>
                </transition>
            </state>

            <state id="wait">
                <transition event="createdInstance" target="../start">
                    <parameter name="success" />
                    <parameter name="class_name" />
                    <parameter name="reference" />
                    <add name="created1" reference="reference"/>
                    <raise port="test_output" event="associate_added"/>
                    <raise target="created1" event="hello" />
                </transition>
            </state>
        </scxml>
    </class>
    <class name="Test2" default="false">
        <scxml>
            <state id="start">
                <transition event="hello" target=".">
                    <raise port="test_output" event="second_working" />
                </transition>
            </state>
        </scxml>
    </class>
</diagram>
