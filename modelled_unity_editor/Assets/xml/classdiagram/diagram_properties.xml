<?xml version="1.0" encoding="UTF-8" ?>
<class name="DiagramProperties">
    <relationships>
        <association class="PropertiesPanel" name="panel" max="1"/>
        <association class="Button" name="buttons"/>
    </relationships>
    <attribute type="SGUIVerticalGroup" name="panel_widget"/>
    <attribute type="XElement" name='diagram_xml'/>
    <attribute type="SGUITextField" name='author_field'/>
    <attribute type="SGUITextField" name='name_field'/>
    <attribute type="SGUITextArea" name='description_field'/>
    <attribute type="SGUITextArea" name='top_field'/>
    <attribute type="SGUIButton" name="add_input_port_button"/>
    <attribute type="SGUIVerticalGroup" name="input_ports"/>
    <constructor>
        <parameter type="SGUIVerticalGroup" name='panel_widget'/>
        <parameter type="XElement" name='diagram_xml'/>
        <body>
            <![CDATA[
            this.panel_widget = panel_widget;
            this.diagram_xml = diagram_xml;
            this.author_field = new SGUITextField("author");
            this.panel_widget.addChild(this.author_field);
            this.name_field = new SGUITextField("name");
            this.panel_widget.addChild(this.name_field);
            this.description_field = new SGUITextArea("description");
            this.panel_widget.addChild(this.description_field);
            this.top_field = new SGUITextArea("top");
            this.panel_widget.addChild(this.top_field);
            SGUIHorizontalGroup input_ports_heading = new SGUIHorizontalGroup();
            input_ports_heading.addChild(new SGUILabel("Input Ports:"));
            this.add_input_port_button = new SGUIButton(new SGUIButtonInformation("Add", "add_input_port"), false);
            input_ports_heading.addChild(this.add_input_port_button);
            this.panel_widget.addChild(input_ports_heading);
            this.input_ports = new SGUIVerticalGroup();
            this.panel_widget.addChild(SGUIVerticalGroup());
            ]]>
        </body>
    </constructor>
    <destructor>
        <body>
            this.panel_widget.clearChildren();
        </body>
    </destructor>
    <scxml initial="setup">
        <state id="setup" initial="button_creation">
            <state id="button_creation">
                <transition target="../button_activation">
                    <script>
                        SGUIButton button_widget = new SGUIButton( new SGUIButtonInformation("Edit", "open_statechart_event"), false);
                        this.panel_widget.addChild(button_widget);
                    </script>
                    <raise scope="cd" event="create_instance">
                        <parameter expr='"buttons"' />
                        <parameter expr='"Button"'/>
                        <parameter expr='button_widget' />
                    </raise>
                </transition>
            </state>
            <state id="button_activation">
                <transition event="instance_created" target="../../listening">
                    <parameter name="id" type="int"/>
                    <parameter name="association_name" type="String"/>
                    <script>
                        String association_path = String.Format("{0}[{1}]", association_name, id);
                    </script>
                    <raise scope="cd" event="associate_instance">
                        <parameter expr='"."' />
                        <parameter expr='association_path + "/event_receiver"'/>
                    </raise>
                    <raise scope="cd" event="start_instance">
                        <parameter expr='association_path' />
                    </raise>
                </transition>
            </state>
        </state>
        <state id="listening">
            <transition event="button_pressed" target=".">
                <parameter name="button_action" type="string"/>
                <script>
                </script>
            </transition>
        </state>
    </scxml>
</class>
